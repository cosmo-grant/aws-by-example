<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>lambda_responses_and_logs.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title>lambda responses and logs</title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/index-BXqkmYCF.js"></script>
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/preload-helper-BnutJmlU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/chunk-DZLz74EQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/react-BcIddLXZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/compiler-runtime-Cr9loedd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/jsx-runtime-mwDPpfh_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useEventListener-D1FLsfmf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/react-dom-D6bRRS5R.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Combination-BjaZc6gK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/clsx-BlAkgCmw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cn-ZXtYmczU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/menu-items-DwOFR2Zi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/hotkeys-ClCtr3_I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/button-ZC2axIBq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-o-4-WxUj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/createLucideIcon-CNVopWor.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/check-CuBLr6Cm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/select-5fcaZwou.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/multi-map-D9JaQ_m6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/chevron-right-BV0VfNbL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dropdown-menu-uN_XMhZm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/tooltip-BHnVWzH0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_Uint8Array-D5Z9rM2X.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_getTag-CVRrQL_Q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseIsEqual-CVFfFJm2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/jotai-BTnrNcC1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/invariant-D5a0EE05.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/isArrayLikeObject-DKyJYtr8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/merge-Dvc5opZF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/zod-U2NFpcFA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/utils-DEDX0RLo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/requests-BACZP_uj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/once-C5bmD4W5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toDate-C3oOx2yr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseSlice-BWZ0PeaJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_arrayMap-DQI2GUNb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/isSymbol-xTSywenE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toString-CBnct2wx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_hasUnicode-3DIK_jNi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/upperFirst-CBQfDRod.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/capitalize-CBqvgOfA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ai-model-dropdown-CvhbTHha.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/badge-Jfhpc30N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/use-toast-midBZAtS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/constants-CEISdYm1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Deferred-NfAvvkGM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/config-C6qInAhC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/uuid-D0hUC3Qw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/key-Cx1qY8eM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/connection-Bs4SQ_vu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useLifecycle-DogGOXPh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useNonce-VIoWEX5z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/capabilities-srilPYuF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/createReducer-CeLhipaI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-MHIqsPCF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-8_YHxBVW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-CbvGwhr0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-CPUmJw_F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DcDuMWp5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DJV2CjUA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-C14Sk-Bd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-vBG1bGij.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-Oad1venD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/stex-xveX5l_T.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cjs-Ck8KMDI1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseProperty-c4IQJQis.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toNumber-CTOPJrpu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/now-BXqTLlmI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/debounce-BUM2losY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toInteger-Bor4StOs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/type-o43RKOcp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/marked.esm-BV7g2d65.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/main-ChjX94eX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cells-A69p56PE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/kbd-DbVT085u.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/renderShortcut-DJmsjON-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useEvent-CRDKqG3C.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useDeleteCell-CEsjHDdl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/lazy-oPCv0nK8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/defaultLocale-YmL2k7Vp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/precisionRound-Qxa8hC2h.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/defaultLocale-zQltfbSS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/vega-loader.browser-D2m26-DP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/tooltip-BFMRXuzR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ErrorBoundary-_uEOjNWh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/alert-dialog-8EwWlboa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dialog-BfhgTWm1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useDebounce-DzG_89QJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/numbers-CTSqyVyD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/SSRProvider-B8x7qo1c.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/context-CcLKJeA2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useNumberFormatter-F8R3LBxf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/usePress-BO20vkQb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/input-BNb8K99m.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ImperativeModal-C4fZHLKz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cell-link-D75IV6D1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/alert-BqjCH_7t.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/links-CMl0qG9J.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/state-JZFfOGr9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/MarimoErrorOutput-BATnwNYX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/spinner-CuquyDWA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_arrayReduce-DV4IVFuG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/startCase-RfubwhHM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/strings-DHsDEFo-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/command-Dlk4i3l7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/popover-F0Sfc1dn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useRunCells-BLpH_l8E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/copy-LsxoSTiV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/copy-Dy_tLkL8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/copy-icon-CE7wmMnS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mode-Bq6LjPC-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/purify.es-CPMOFAIu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/RenderHTML-DTLkV9Uh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/table-DU76OrPF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/tabs-l9npw3ob.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useAsyncData-CngUoIwV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useIframeCapabilities-DXQ78nsN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/error-banner-DoSAS3iD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/formats-BN93kMCb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useTheme-Biy2QI0v.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/en-US-D2gH55FJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/isValid-BJSfXqfd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/maps-B1z3jt-a.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/shim-Cc3VMan6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/download-ByFIcaoi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/extends-dwNt6GDg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/emotion-is-prop-valid.esm-OoyWz_0l.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useDateFormatter-CPDTrKqK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/range-ZclXTdAh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/table-C2gUjtJV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Output-DWmT-7NV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/name-cell-input-DND1MD7b.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useHotkey-NDxGNWnW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/objectWithoutPropertiesLoose-COpOcp6W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/esm-B3nKz9z-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-GE2AwHvG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-CMHCymvx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-ta4iJSan.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-BcppZLnk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DRTi9ht4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-BjGT2Oog.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-CXL8T4lt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-B0B_Xnwd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-BcgNLefj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-j2I9I0a7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DM2w8f7r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-nhBdVy6b.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-D-JTXier.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/apl-BGS-6pM9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/asciiarmor-CbQH35y7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/asn1-P7HrFGaM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/brainfuck-CSxeyQc4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/clike-Bg9duJDo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/clojure-B94DOmFw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cmake-DQEKyMNG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cobol-CY4gVoPW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/coffeescript-BwWb96Ts.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/commonlisp-Cq_n1sF6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/crystal-BLTq7Sqq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/css-CmDcdojQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cypher-ByytCYVx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/d-xLFRg71F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/diff-VF6GbDch.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dtd-D8qb8bJW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dylan-CIkom9X4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ecl-8wcmTiom.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/eiffel-D2ZBcT03.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/elm-Cpg3TnMc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/erlang-B4A2pXCG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/simple-mode-BrL6eoj-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/factor-DhbRkYZ5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/forth-C5F1F4pC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/fortran-D7Gl3Tli.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/gas-BS2f8qHc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/gherkin-CVZcskwU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/groovy-BhQsBMwW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/haskell-BPbxlKgK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/haxe-TKSAmiMf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/idl-DFgQu5Ek.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/javascript-dAA8UGkz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/jinja2-BIbcpWyF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/julia-CfdFJG3K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/livescript-FcXY3DYa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/lua-Co6rjiMf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mathematica-yb42KhnJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mbox-Kdy3h0JS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mirc-DIfBuSAc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mllike-ClozcVVR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/modelica-DfSVZeoi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mscgen-BCcB4vmY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/mumps-Zs7zFruB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/nsis-znELVT3h.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ntriples-BZ-Gx5MV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/octave-DbhnFGQl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/oz-C8cfEyhB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/pascal-DjQLfZxE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/perl-BbHwsgL1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/pig-siFNrhhJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/powershell-DtGrdgtc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/properties-ThqBcpfC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/protobuf-RiYv9VfD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/pug-DUVdXXqU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/puppet-U5CQLRYv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/python-Bwt6zAaD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/q-DIhdXtBp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/r-CWawXx6U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/rpm-CNr8ALvx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ruby-DskfS84U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/sas-C2b2tSOH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/scheme-Cmmcrp64.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/shell-Dyv1aCg9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/sieve-B_dGzCIS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/smalltalk-intFzbz6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/sparql-BX1c9HJU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/stylus-X6xt1FMB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/swift-BYNJXGdg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/tcl-BaybuQuE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/textile-77KFAyfi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toml-D6E8t1IG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/troff-BfktZMhT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ttcn-cfg-CstA0KVC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ttcn-DOlRqUFL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/turtle-Cx-tHjh2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/vb-DerFRxqu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/vbscript-BPEY3B7J.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/velocity-B-lFP8Gk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/verilog-C9TzcLDl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/vhdl-v8a_uH2H.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/webidl-DmZw40AA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/xquery-BrIWpdRx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/yacas-ofPECLUx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/z80-DrGVKC-O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/esm-DtCFmQ1n.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/trash-CRcefzxk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ConsoleOutput-BJP_UIwR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/icons-DaFojEUL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/add-missing-import-Bc1Nj8aC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/blob-ISoY06EG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/add-cell-with-ai-Bf3hYYIu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/chart-no-axes-column-DYZiSI6e.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/square-function-sjebOKTF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/spec-C5SzKl5N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/focus-BaSDCTOl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useInstallPackage-I3kefbOO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/column-preview-WPlkULp9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useAddCell-CREgcbTt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/toggle-DlfY8wql.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/api-YJHlT7KM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/globals-Dp5TPAWC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/share-8z32Sr0F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/dist-DBrqGLzW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/memoize-DhF8x4Aa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_toKey-16owuO_q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseSet-L2qemYhz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/utilities.esm-Bjl8-mRM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/floating-outline-1_-JOoBX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/eye-off-_Bp7Ir5E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/plus-CRGccegF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/readonly-python-code-B4MS39iL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/file-video-camera-DJUITpag.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/file-text-CFgIi1A4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/file-Cz8xVTWu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/types-Bh2kSb2q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/label-Dcu3RhQ4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/form-CaSJmn0I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/textarea-DeG5mMSH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/circle-x-Dm9uA-wT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/refresh-ccw-Dg4gNnPm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/trash-2-BPux4_UF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/form-DaO98mWt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/field-CaHPDBhq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/switch-4s4187gV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useBoolean-CpaqzlKu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/useDeepCompareMemoize-DiJVYA6I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/LazyAnyLanguageCodeMirror-BovGLUi6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/types-CHAkS4Oz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/prop-types-Dr_68tMt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/es-vLBD1nBl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/VisuallyHidden-DqOWapbP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_baseFlatten-ViL-mfkw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/get-BUGWIXZE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/hasIn-BgJKauE7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/_basePickBy-CSDa7ReR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/pick-BQzWKfma.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/square-CYRwTwZO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/download-ptuQ0M1w.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/globe-mi3m-i9B.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/send-CTRovYct.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/refresh-cw-Duwwh0cP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/settings-p8vTgdrN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/bundle.esm-BEDtDq85.js">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/cells-BvrC6Bsv.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/Output-j3zW187k.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/ConsoleOutput-BFFTcC5Y.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.7/dist/assets/index-BmcO-QYJ.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "lambda_responses_and_logs.py",
            "mode": "read",
            "version": "0.17.7",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "diagnostics": {"sql_linter": true}, "display": {"cell_output": "below", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "medium", "reference_highlighting": false, "theme": "light"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": false}}, "mcp": {"mcpServers": {}, "presets": []}, "package_management": {"manager": "pip"}, "runtime": {"auto_instantiate": false, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"sql_output": "auto", "width": "medium"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "import marimo as mo", "code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hbol", "name": "_"}, {"code": "mo.md(r\"\"\"\n# Lambda Response and Logs\n\nWhen you invoke a lambda function,\nwhat do the responses and logs look like\n- for cold versus warm start?\n- if the init raises an exception?\n- if the handler raises an exception?\n- if the init times out?\n- if the handler times out?\n- if the handler returns an unserializable object?\n\"\"\")", "code_hash": "292014145e83be750f06d58ac1d76976", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "MJUe", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Stack\n\nJust a bunch of lambdas:\n- `slow_init`\n- `init_exception`\n- `handler_exception`\n- `init_times_out`\n- `handler_times_out`\n- `handler_returns_unserializable`\n\neach doing what its name suggests, via `sleep()` or `raise Exception` or `return set()`.\n\"\"\")", "code_hash": "cdaacc3a753a28aef2da86cba4dc0914", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "vblA", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Setup\n\"\"\")", "code_hash": "ae7547cc4d82972b5db59e7c7400fc48", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "bkHC", "name": "_"}, {"code": "import boto3\nimport datetime", "code_hash": "216bf00c66b7ecaaa4731c608f32584a", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "lEQa", "name": "_"}, {"code": "lambda_ = boto3.client(\"lambda\")\nlogs = boto3.client(\"logs\")", "code_hash": "19b4b2ad30f47bf976f1bc085d56aefe", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "PKri", "name": "_"}, {"code": "call_times = {}\nresponses = {}\n\nfor function_name in (\n    \"slow_init\",\n    \"slow_init\",  # twice, to contrast cold versus warm start\n    \"init_exception\",\n    \"handler_exception\",\n    \"init_times_out\",\n    \"handler_times_out\",\n    \"handler_returns_unserializable\",\n):\n    # the dict values are all lists so i can treat once-called and twice-called functions uniformly\n    call_times.setdefault(function_name, []).append(datetime.datetime.now(datetime.UTC))\n    response = lambda_.invoke(FunctionName=function_name)\n    del response[\"ResponseMetadata\"]  # just noise for our purposes\n    del response[\"ExecutedVersion\"]  # \"$LATEST\"\n    # the \"Payload\" value is a botocore.response.StreamingBody object\n    # it's file-like, so has a `read()` method, returning bytes\n    response[\"Payload\"] = response[\"Payload\"].read().decode(\"utf-8\")\n    responses.setdefault(function_name, []).append(response)", "code_hash": "c8e587ec733ebef9f6cdcd98099f3a88", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "BYtC", "name": "_"}, {"code": "def print_logs(function_name):\n    earliest_call_time = min(call_times[function_name])\n\n    earliest_call_timestamp_in_ms = int(earliest_call_time.timestamp()) * 1000\n    response = logs.filter_log_events(\n        logGroupName=f\"/aws/lambda/{function_name}\",\n        startTime=earliest_call_timestamp_in_ms,\n    )\n\n    nice_logs = \"\"\n    for event in response[\"events\"]:\n        t = datetime.datetime.fromtimestamp(event[\"timestamp\"] / 1000, datetime.UTC)\n        message = event[\"message\"]\n        nice_logs += f\"{t}: {message}\"\n\n    print(nice_logs)", "code_hash": "3e688b234d54b3185e8d11916527ed2b", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "RGSE", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Results\n\"\"\")", "code_hash": "a6a5a334e36a93f709140deb3db086e7", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Kclp", "name": "_"}, {"code": "mo.md(r\"\"\"\n### `slow_init`\n\"\"\")", "code_hash": "6b47e7788375f185f22d937d636f1d4b", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "emfo", "name": "_"}, {"code": "responses[\"slow_init\"]", "code_hash": "2a7e02b4b10efa6004c5aab2aabb4c88", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hstk", "name": "_"}, {"code": "call_times[\"slow_init\"]", "code_hash": "9cd144d85f4b6eb24c43e8cd4ad9f09f", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "nWHF", "name": "_"}, {"code": "print_logs(\"slow_init\")", "code_hash": "3117adb62615455efd05ca04ab7bdb11", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "iLit", "name": "_"}, {"code": "mo.md(r\"\"\"\nThe `StatusCode` key is from the Lambda service, not the function.\n\nIn happy cases, like this one, the `\"Payload\"` is the `json.dumps()` of the function's return value.\n\nThe first, cold invocation has an `INIT_START` message and an `Init Duration` in the `REPORT` message.\nThe second, warm invocation has neither.\n\nThe first invocation's `Billed Duration` is the _sum_ of its `Init Duration` and (handler) `Duration`, rounded up to the nearest millsecond.\nSo you're billed for the init time.\nThat's a recent change.\nBefore August 1 2025, the init time for\n\n\u003E on-demand invocations of Lambda functions packaged as ZIP files that use managed runtimes\n\nwere not billed.\n\nThe function's timeout is 3s (the default).\nThe init was 4s.\nBut no timeout.\nSo the init does not count towards the function's timeout.\n\nPayloads are meant to be json,\nbut `\"hi there\"` isn't json, is it?\nSure it is [2]:\n\n\u003E A JSON text is a serialized value. Note that certain previous specifications of JSON constrained a JSON text to be an object or an array.\n\npost [3] explains the confusion nicely.\n\"\"\")", "code_hash": "662fdfa889add5cf4f5c2feec42ef893", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZHCJ", "name": "_"}, {"code": "mo.md(r\"\"\"\n### `init_exception`\n\"\"\")", "code_hash": "44de8b8f827ad29165f8745d97f5ab0c", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ROlb", "name": "_"}, {"code": "responses[\"init_exception\"]", "code_hash": "5a8d9b726d2be1cafd172b054d9e7d95", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "qnkX", "name": "_"}, {"code": "call_times[\"init_exception\"]", "code_hash": "e06e7ad65f89df1cc86b5aeaf8fd92f0", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "TqIu", "name": "_"}, {"code": "print_logs(\"init_exception\")", "code_hash": "7d99edfa35832776dac0eecb0cb411cb", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Vxnm", "name": "_"}, {"code": "mo.md(r\"\"\"\n`\"StatusCode\": 200` in the response,\ndespite the exception,\nbecause it's about your request to the Lambda service,\nnot about your function [4].\n\n\u003E The status code in the API response doesn\u2019t reflect function errors. Error codes are reserved for errors that prevent your function from executing, such as permissions errors, quota errors, or issues with your function\u2019s code and configuration.\n\nWhat does flag that something went wrong\nis the presence of `\"FunctionError\"`.\nThe value is `\"Unhandled\"`,\nwhich makes sense,\nbut I wonder if any other values are possible.\n\nThe payload is rich\n\u2014 even a stacktrace (\"traceback\" in the logs).\n\nThe response doesn't explicitly flag that the error was in the init.\nIn this case, it's plain from the stacktrace.\nIn actual cases, it might not be.\n\nNotice the empty request id in the payload\nbut populated request id in the last few logs.\n\nThe logs have an `INIT_REPORT` message this time,\nincluding `Phase: init` and `Status: error`.\nThat's helpful\n\u2014 no mistaking that the init errored.\nI guess we get an `INIT_REPORT` only when the init goes wrong?\n\nWe also get a `LAMBDA_WARNING` message from the Lambda service,\nand the same traceback as was in the response.\n\nIn fact we get these messages\n\u2014 the `LAMBDA_WARNING`, traceback, and `INIT_REPORT`\n\u2014 twice!\nBut the second `INIT_REPORT` is slightly different:\na different duration\nand `Phase: invoke`.\n\nAnd we also get a `REPORT`,\nwith yet a different duration.\n\nPuzzling.\nWhy does an `INIT_REPORT` refer to `Phase: invoke`?\nWhy repeat the warning and traceback?\nWhy three different durations?\nWhy request id in logs but not payload?\nDoes Lambda try to invoke your function even when the init failed?\nOr is it just pretending that it tried?\n\"\"\")", "code_hash": "6f23403f7b7cd71166934fb1b5e17298", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "DnEU", "name": "_"}, {"code": "mo.md(r\"\"\"\n### `handler_exception`\n\"\"\")", "code_hash": "c9dc9c5d033d3f6b0c1eaf706ef5f8f6", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ulZA", "name": "_"}, {"code": "responses[\"handler_exception\"]", "code_hash": "3b17973b0df62fe2e5d33bebcb64ba70", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ecfG", "name": "_"}, {"code": "call_times[\"handler_exception\"]", "code_hash": "9ec7d7cf23e26fe2ec152311bf682a62", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Pvdt", "name": "_"}, {"code": "print_logs(\"handler_exception\")", "code_hash": "fca7b86dbe6f9034a8e59d2b42abbf18", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZBYS", "name": "_"}, {"code": "mo.md(r\"\"\"\nNo surprises here.\n\"\"\")", "code_hash": "d584a35b333e5d25ed1f65b0e347fdc6", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "nJHb", "name": "_"}, {"code": "mo.md(r\"\"\"\n### `init_times_out`\n\"\"\")", "code_hash": "a4ec9da419befe3785644743616fed81", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "aLJB", "name": "_"}, {"code": "responses[\"init_times_out\"]", "code_hash": "0243fb17e96057b37b19edc0ec7ef813", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "nHfw", "name": "_"}, {"code": "call_times[\"init_times_out\"]", "code_hash": "37a3c23104812fb18a07dd3b63937322", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "xXTn", "name": "_"}, {"code": "print_logs(\"init_times_out\")", "code_hash": "71f18bdab2f12b8f942bc2dfa1cef3e3", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "AjVT", "name": "_"}, {"code": "mo.md(r\"\"\"\nThe init timed out after 10s.\nBut the payload says \"Task timed out after 3.00 seconds\".\n\nWe have two `INIT_REPORT`s,\nas we did for `init_exception`.\nOne is for the init phase and records a duration of 10s.\nThe other is for the invoke phase and records a duration of about 3s.\n\nWe have a `REPORT` too,\nthis with a duration of exactly 3s.\n\nPuzzling again,\nlike for `init_exception`.\n\nThe response and the logs are half-subsuming the init into the invoke.\n\nMy takeaway: the logs are geared for the normal case, not init failures.\n\"\"\")", "code_hash": "7624b9958b14b6e64cca1fb5e0397f59", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "BVRN", "name": "_"}, {"code": "mo.md(r\"\"\"\n### `handler_times_out`\n\"\"\")", "code_hash": "01fa6041cd4f7da9879ac3ae1a6bb5fc", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "pHFh", "name": "_"}, {"code": "responses[\"handler_times_out\"]", "code_hash": "5b1bd4cebb61d7ae18659a1cd3c39ff2", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "fmRH", "name": "_"}, {"code": "call_times[\"handler_times_out\"]", "code_hash": "624811faa61f202fbb89d829465cf014", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Cvih", "name": "_"}, {"code": "print_logs(\"handler_times_out\")", "code_hash": "f4d9222e7656bb75464da5ea53ecbeef", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "DlIZ", "name": "_"}, {"code": "mo.md(r\"\"\"\nNo surprises here.\n\"\"\")", "code_hash": "d584a35b333e5d25ed1f65b0e347fdc6", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "uNsA", "name": "_"}, {"code": "mo.md(r\"\"\"\n### `handler_returns_unserializable`\n\"\"\")", "code_hash": "880ff0c2ab56be39271664b8ab679867", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "NCOB", "name": "_"}, {"code": "responses[\"handler_returns_unserializable\"]", "code_hash": "a2ea028aa3bc5e815c93292ced279b63", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "riIp", "name": "_"}, {"code": "call_times[\"handler_returns_unserializable\"]", "code_hash": "19a829d6f46548be6858f9d23ba4d066", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "utRS", "name": "_"}, {"code": "print_logs(\"handler_returns_unserializable\")", "code_hash": "2cb0a30e7b72b5b5fd0bcafeab82f201", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "lAbl", "name": "_"}, {"code": "mo.md(r\"\"\"\nThe error type in the response is `Runtime.MarshalError`,\nnot `TypeError`, which is what `json.dumps(set())` raises.\nThat makes sense:\na Lambda procedure failed,\nso we get Lambda-specific errors,\neven if that procedure is mimicking Python's `json.dumps()`.\n\"\"\")", "code_hash": "0ac2d2d1e0384bb7ca3e192d6bfa727f", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Newz", "name": "_"}, {"code": "mo.md(r\"\"\"\n## References\n\n[1] https://aws.amazon.com/blogs/compute/aws-lambda-standardizes-billing-for-init-phase/\n\n[2] https://www.ietf.org/rfc/rfc7159.txt\n\n[3] https://stackoverflow.com/a/7487892\n\n[4] https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/lambda/client/invoke.html\n\"\"\")", "code_hash": "12236ca5736abe4ad544399ae80c19e2", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "aqbW", "name": "_"}], "metadata": {"marimo_version": "0.17.7"}, "version": "1"},
            "session": {"cells": [{"code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "console": [], "id": "Hbol", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "292014145e83be750f06d58ac1d76976", "console": [], "id": "MJUe", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch1 id=\"lambda-response-and-logs\"\u003ELambda Response and Logs\u003C/h1\u003E\n\u003Cspan class=\"paragraph\"\u003EWhen you invoke a lambda function,\nwhat do the responses and logs look like\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003Efor cold versus warm start?\u003C/li\u003E\n\u003Cli\u003Eif the init raises an exception?\u003C/li\u003E\n\u003Cli\u003Eif the handler raises an exception?\u003C/li\u003E\n\u003Cli\u003Eif the init times out?\u003C/li\u003E\n\u003Cli\u003Eif the handler times out?\u003C/li\u003E\n\u003Cli\u003Eif the handler returns an unserializable object?\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "cdaacc3a753a28aef2da86cba4dc0914", "console": [], "id": "vblA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"stack\"\u003EStack\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003EJust a bunch of lambdas:\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Eslow_init\u003C/code\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ccode\u003Einit_exception\u003C/code\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ccode\u003Ehandler_exception\u003C/code\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ccode\u003Einit_times_out\u003C/code\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ccode\u003Ehandler_times_out\u003C/code\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ccode\u003Ehandler_returns_unserializable\u003C/code\u003E\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cspan class=\"paragraph\"\u003Eeach doing what its name suggests, via \u003Ccode\u003Esleep()\u003C/code\u003E or \u003Ccode\u003Eraise Exception\u003C/code\u003E or \u003Ccode\u003Ereturn set()\u003C/code\u003E.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "ae7547cc4d82972b5db59e7c7400fc48", "console": [], "id": "bkHC", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"setup\"\u003ESetup\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "216bf00c66b7ecaaa4731c608f32584a", "console": [], "id": "lEQa", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "19b4b2ad30f47bf976f1bc085d56aefe", "console": [], "id": "PKri", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "c8e587ec733ebef9f6cdcd98099f3a88", "console": [], "id": "BYtC", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "3e688b234d54b3185e8d11916527ed2b", "console": [], "id": "RGSE", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "a6a5a334e36a93f709140deb3db086e7", "console": [], "id": "Kclp", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"results\"\u003EResults\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "6b47e7788375f185f22d937d636f1d4b", "console": [], "id": "emfo", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"slow_init\"\u003E\u003Ccode\u003Eslow_init\u003C/code\u003E\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "2a7e02b4b10efa6004c5aab2aabb4c88", "console": [], "id": "Hstk", "outputs": [{"data": {"application/json": "[{\"StatusCode\": 200, \"Payload\": \"\\\"hi there\\\"\"}, {\"StatusCode\": 200, \"Payload\": \"\\\"hi there\\\"\"}]"}, "type": "data"}]}, {"code_hash": "9cd144d85f4b6eb24c43e8cd4ad9f09f", "console": [], "id": "nWHF", "outputs": [{"data": {"application/json": "[\"text/plain:2025-11-23 00:37:09.541381+00:00\", \"text/plain:2025-11-23 00:37:13.972298+00:00\"]"}, "type": "data"}]}, {"code_hash": "3117adb62615455efd05ca04ab7bdb11", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "2025-11-23 00:37:09.876000+00:00: INIT_START Runtime Version: python:3.13.v74\tRuntime Version ARN: arn:aws:lambda:eu-west-2::runtime:ce7da947c7c5e914eae22806e9f241ceb83a56a93ebcae5588c99b18c38636ce\n2025-11-23 00:37:13.978000+00:00: START RequestId: f8f08fde-88ec-4521-a77d-afc2fdea6cdc Version: $LATEST\n2025-11-23 00:37:13.981000+00:00: END RequestId: f8f08fde-88ec-4521-a77d-afc2fdea6cdc\n2025-11-23 00:37:13.981000+00:00: REPORT RequestId: f8f08fde-88ec-4521-a77d-afc2fdea6cdc\tDuration: 2.19 ms\tBilled Duration: 4101 ms\tMemory Size: 128 MB\tMax Memory Used: 37 MB\tInit Duration: 4098.79 ms\t\n2025-11-23 00:37:14.033000+00:00: START RequestId: c7f178a5-dc75-479c-b14c-ffeb3c9a70c4 Version: $LATEST\n2025-11-23 00:37:14.035000+00:00: END RequestId: c7f178a5-dc75-479c-b14c-ffeb3c9a70c4\n2025-11-23 00:37:14.035000+00:00: REPORT RequestId: c7f178a5-dc75-479c-b14c-ffeb3c9a70c4\tDuration: 1.77 ms\tBilled Duration: 2 ms\tMemory Size: 128 MB\tMax Memory Used: 37 MB\t\n\n", "type": "stream"}], "id": "iLit", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "662fdfa889add5cf4f5c2feec42ef893", "console": [], "id": "ZHCJ", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003EThe \u003Ccode\u003EStatusCode\u003C/code\u003E key is from the Lambda service, not the function.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EIn happy cases, like this one, the \u003Ccode\u003E\"Payload\"\u003C/code\u003E is the \u003Ccode\u003Ejson.dumps()\u003C/code\u003E of the function's return value.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe first, cold invocation has an \u003Ccode\u003EINIT_START\u003C/code\u003E message and an \u003Ccode\u003EInit Duration\u003C/code\u003E in the \u003Ccode\u003EREPORT\u003C/code\u003E message.\nThe second, warm invocation has neither.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe first invocation's \u003Ccode\u003EBilled Duration\u003C/code\u003E is the \u003Cem\u003Esum\u003C/em\u003E of its \u003Ccode\u003EInit Duration\u003C/code\u003E and (handler) \u003Ccode\u003EDuration\u003C/code\u003E, rounded up to the nearest millsecond.\nSo you're billed for the init time.\nThat's a recent change.\nBefore August 1 2025, the init time for\u003C/span\u003E\n\u003Cblockquote\u003E\n\u003Cspan class=\"paragraph\"\u003Eon-demand invocations of Lambda functions packaged as ZIP files that use managed runtimes\u003C/span\u003E\n\u003C/blockquote\u003E\n\u003Cspan class=\"paragraph\"\u003Ewere not billed.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe function's timeout is 3s (the default).\nThe init was 4s.\nBut no timeout.\nSo the init does not count towards the function's timeout.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EPayloads are meant to be json,\nbut \u003Ccode\u003E\"hi there\"\u003C/code\u003E isn't json, is it?\nSure it is [2]:\u003C/span\u003E\n\u003Cblockquote\u003E\n\u003Cspan class=\"paragraph\"\u003EA JSON text is a serialized value. Note that certain previous specifications of JSON constrained a JSON text to be an object or an array.\u003C/span\u003E\n\u003C/blockquote\u003E\n\u003Cspan class=\"paragraph\"\u003Epost [3] explains the confusion nicely.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "44de8b8f827ad29165f8745d97f5ab0c", "console": [], "id": "ROlb", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"init_exception\"\u003E\u003Ccode\u003Einit_exception\u003C/code\u003E\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "5a8d9b726d2be1cafd172b054d9e7d95", "console": [], "id": "qnkX", "outputs": [{"data": {"application/json": "[{\"StatusCode\": 200, \"FunctionError\": \"Unhandled\", \"Payload\": \"{\\\"errorMessage\\\": \\\"uh oh\\\", \\\"errorType\\\": \\\"Exception\\\", \\\"requestId\\\": \\\"\\\", \\\"stackTrace\\\": [\\\"  File \\\\\\\"/var/lang/lib/python3.13/importlib/__init__.py\\\\\\\", line 88, in import_module\\\\n    return _bootstrap._gcd_import(name[level:], package, level)\\\\n\\\", \\\"  File \\\\\\\"\u003Cfrozen importlib._bootstrap\u003E\\\\\\\", line 1387, in _gcd_import\\\\n\\\", \\\"  File \\\\\\\"\u003Cfrozen importlib._bootstrap\u003E\\\\\\\", line 1360, in _find_and_load\\\\n\\\", \\\"  File \\\\\\\"\u003Cfrozen importlib._bootstrap\u003E\\\\\\\", line 1331, in _find_and_load_unlocked\\\\n\\\", \\\"  File \\\\\\\"\u003Cfrozen importlib._bootstrap\u003E\\\\\\\", line 935, in _load_unlocked\\\\n\\\", \\\"  File \\\\\\\"\u003Cfrozen importlib._bootstrap_external\u003E\\\\\\\", line 1027, in exec_module\\\\n\\\", \\\"  File \\\\\\\"\u003Cfrozen importlib._bootstrap\u003E\\\\\\\", line 488, in _call_with_frames_removed\\\\n\\\", \\\"  File \\\\\\\"/var/task/index.py\\\\\\\", line 1, in \u003Cmodule\u003E\\\\n    raise Exception(\\\\\\\"uh oh\\\\\\\")\\\\n\\\"]}\"}]"}, "type": "data"}]}, {"code_hash": "e06e7ad65f89df1cc86b5aeaf8fd92f0", "console": [], "id": "TqIu", "outputs": [{"data": {"application/json": "[\"text/plain:2025-11-23 00:37:14.005268+00:00\"]"}, "type": "data"}]}, {"code_hash": "7d99edfa35832776dac0eecb0cb411cb", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "2025-11-23 00:37:14.219000+00:00: INIT_START Runtime Version: python:3.13.v74\tRuntime Version ARN: arn:aws:lambda:eu-west-2::runtime:ce7da947c7c5e914eae22806e9f241ceb83a56a93ebcae5588c99b18c38636ce\n2025-11-23 00:37:14.340000+00:00: [WARNING]\t2025-11-23T00:37:14.340Z\t\tLAMBDA_WARNING: Unhandled exception. The most likely cause is an issue in the function code. However, in rare cases, a Lambda runtime update can cause unexpected function behavior. For functions using managed runtimes, runtime updates can be triggered by a function change, or can be applied automatically. To determine if the runtime has been updated, check the runtime version in the INIT_START log entry. If this error correlates with a change in the runtime version, you may be able to mitigate this error by temporarily rolling back to the previous runtime version. For more information, see https://docs.aws.amazon.com/lambda/latest/dg/runtimes-update.html\r\n2025-11-23 00:37:14.340000+00:00: [ERROR] Exception: uh oh\nTraceback (most recent call last):\n\u00a0\u00a0File \"/var/lang/lib/python3.13/importlib/__init__.py\", line 88, in import_module\n\u00a0\u00a0\u00a0\u00a0return _bootstrap._gcd_import(name[level:], package, level)\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 1387, in _gcd_import\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 1360, in _find_and_load\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 1331, in _find_and_load_unlocked\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 935, in _load_unlocked\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap_external\u003E\", line 1027, in exec_module\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 488, in _call_with_frames_removed\n\u00a0\u00a0File \"/var/task/index.py\", line 1, in \u003Cmodule\u003E\n\u00a0\u00a0\u00a0\u00a0raise Exception(\"uh oh\")2025-11-23 00:37:14.390000+00:00: INIT_REPORT Init Duration: 171.15 ms\tPhase: init\tStatus: error\tError Type: Runtime.Unknown\n2025-11-23 00:37:14.463000+00:00: [WARNING]\t2025-11-23T00:37:14.463Z\t\tLAMBDA_WARNING: Unhandled exception. The most likely cause is an issue in the function code. However, in rare cases, a Lambda runtime update can cause unexpected function behavior. For functions using managed runtimes, runtime updates can be triggered by a function change, or can be applied automatically. To determine if the runtime has been updated, check the runtime version in the INIT_START log entry. If this error correlates with a change in the runtime version, you may be able to mitigate this error by temporarily rolling back to the previous runtime version. For more information, see https://docs.aws.amazon.com/lambda/latest/dg/runtimes-update.html\r\n2025-11-23 00:37:14.463000+00:00: [ERROR] Exception: uh oh\nTraceback (most recent call last):\n\u00a0\u00a0File \"/var/lang/lib/python3.13/importlib/__init__.py\", line 88, in import_module\n\u00a0\u00a0\u00a0\u00a0return _bootstrap._gcd_import(name[level:], package, level)\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 1387, in _gcd_import\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 1360, in _find_and_load\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 1331, in _find_and_load_unlocked\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 935, in _load_unlocked\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap_external\u003E\", line 1027, in exec_module\n\u00a0\u00a0File \"\u003Cfrozen importlib._bootstrap\u003E\", line 488, in _call_with_frames_removed\n\u00a0\u00a0File \"/var/task/index.py\", line 1, in \u003Cmodule\u003E\n\u00a0\u00a0\u00a0\u00a0raise Exception(\"uh oh\")2025-11-23 00:37:14.502000+00:00: INIT_REPORT Init Duration: 98.97 ms\tPhase: invoke\tStatus: error\tError Type: Runtime.Unknown\n2025-11-23 00:37:14.502000+00:00: START RequestId: 5273fc63-20b2-4a49-9763-c801302fc1dd Version: $LATEST\n2025-11-23 00:37:14.507000+00:00: END RequestId: 5273fc63-20b2-4a49-9763-c801302fc1dd\n2025-11-23 00:37:14.507000+00:00: REPORT RequestId: 5273fc63-20b2-4a49-9763-c801302fc1dd\tDuration: 108.71 ms\tBilled Duration: 109 ms\tMemory Size: 128 MB\tMax Memory Used: 46 MB\tStatus: error\tError Type: Runtime.Unknown\n\n", "type": "stream"}], "id": "Vxnm", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "6f23403f7b7cd71166934fb1b5e17298", "console": [], "id": "DnEU", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Ccode\u003E\"StatusCode\": 200\u003C/code\u003E in the response,\ndespite the exception,\nbecause it's about your request to the Lambda service,\nnot about your function [4].\u003C/span\u003E\n\u003Cblockquote\u003E\n\u003Cspan class=\"paragraph\"\u003EThe status code in the API response doesn\u2019t reflect function errors. Error codes are reserved for errors that prevent your function from executing, such as permissions errors, quota errors, or issues with your function\u2019s code and configuration.\u003C/span\u003E\n\u003C/blockquote\u003E\n\u003Cspan class=\"paragraph\"\u003EWhat does flag that something went wrong\nis the presence of \u003Ccode\u003E\"FunctionError\"\u003C/code\u003E.\nThe value is \u003Ccode\u003E\"Unhandled\"\u003C/code\u003E,\nwhich makes sense,\nbut I wonder if any other values are possible.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe payload is rich\n\u2014 even a stacktrace (\"traceback\" in the logs).\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe response doesn't explicitly flag that the error was in the init.\nIn this case, it's plain from the stacktrace.\nIn actual cases, it might not be.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003ENotice the empty request id in the payload\nbut populated request id in the last few logs.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe logs have an \u003Ccode\u003EINIT_REPORT\u003C/code\u003E message this time,\nincluding \u003Ccode\u003EPhase: init\u003C/code\u003E and \u003Ccode\u003EStatus: error\u003C/code\u003E.\nThat's helpful\n\u2014 no mistaking that the init errored.\nI guess we get an \u003Ccode\u003EINIT_REPORT\u003C/code\u003E only when the init goes wrong?\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EWe also get a \u003Ccode\u003ELAMBDA_WARNING\u003C/code\u003E message from the Lambda service,\nand the same traceback as was in the response.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EIn fact we get these messages\n\u2014 the \u003Ccode\u003ELAMBDA_WARNING\u003C/code\u003E, traceback, and \u003Ccode\u003EINIT_REPORT\u003C/code\u003E\n\u2014 twice!\nBut the second \u003Ccode\u003EINIT_REPORT\u003C/code\u003E is slightly different:\na different duration\nand \u003Ccode\u003EPhase: invoke\u003C/code\u003E.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EAnd we also get a \u003Ccode\u003EREPORT\u003C/code\u003E,\nwith yet a different duration.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EPuzzling.\nWhy does an \u003Ccode\u003EINIT_REPORT\u003C/code\u003E refer to \u003Ccode\u003EPhase: invoke\u003C/code\u003E?\nWhy repeat the warning and traceback?\nWhy three different durations?\nWhy request id in logs but not payload?\nDoes Lambda try to invoke your function even when the init failed?\nOr is it just pretending that it tried?\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "c9dc9c5d033d3f6b0c1eaf706ef5f8f6", "console": [], "id": "ulZA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"handler_exception\"\u003E\u003Ccode\u003Ehandler_exception\u003C/code\u003E\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "3b17973b0df62fe2e5d33bebcb64ba70", "console": [], "id": "ecfG", "outputs": [{"data": {"application/json": "[{\"StatusCode\": 200, \"FunctionError\": \"Unhandled\", \"Payload\": \"{\\\"errorMessage\\\": \\\"uh oh\\\", \\\"errorType\\\": \\\"Exception\\\", \\\"requestId\\\": \\\"4aecfe79-b0fd-44cd-afff-7f7bd21606fe\\\", \\\"stackTrace\\\": [\\\"  File \\\\\\\"/var/task/index.py\\\\\\\", line 2, in handler\\\\n    raise Exception(\\\\\\\"uh oh\\\\\\\")\\\\n\\\"]}\"}]"}, "type": "data"}]}, {"code_hash": "9ec7d7cf23e26fe2ec152311bf682a62", "console": [], "id": "Pvdt", "outputs": [{"data": {"application/json": "[\"text/plain:2025-11-23 00:37:14.474527+00:00\"]"}, "type": "data"}]}, {"code_hash": "fca7b86dbe6f9034a8e59d2b42abbf18", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "2025-11-23 00:37:14.684000+00:00: INIT_START Runtime Version: python:3.13.v74\tRuntime Version ARN: arn:aws:lambda:eu-west-2::runtime:ce7da947c7c5e914eae22806e9f241ceb83a56a93ebcae5588c99b18c38636ce\n2025-11-23 00:37:14.787000+00:00: START RequestId: 4aecfe79-b0fd-44cd-afff-7f7bd21606fe Version: $LATEST\n2025-11-23 00:37:14.824000+00:00: [ERROR] Exception: uh oh\nTraceback (most recent call last):\n\u00a0\u00a0File \"/var/task/index.py\", line 2, in handler\n\u00a0\u00a0\u00a0\u00a0raise Exception(\"uh oh\")2025-11-23 00:37:14.827000+00:00: END RequestId: 4aecfe79-b0fd-44cd-afff-7f7bd21606fe\n2025-11-23 00:37:14.827000+00:00: REPORT RequestId: 4aecfe79-b0fd-44cd-afff-7f7bd21606fe\tDuration: 38.86 ms\tBilled Duration: 139 ms\tMemory Size: 128 MB\tMax Memory Used: 38 MB\tInit Duration: 100.07 ms\t\n\n", "type": "stream"}], "id": "ZBYS", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "d584a35b333e5d25ed1f65b0e347fdc6", "console": [], "id": "nJHb", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003ENo surprises here.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "a4ec9da419befe3785644743616fed81", "console": [], "id": "aLJB", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"init_times_out\"\u003E\u003Ccode\u003Einit_times_out\u003C/code\u003E\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "0243fb17e96057b37b19edc0ec7ef813", "console": [], "id": "nHfw", "outputs": [{"data": {"application/json": "[{\"StatusCode\": 200, \"FunctionError\": \"Unhandled\", \"Payload\": \"{\\\"errorType\\\":\\\"Sandbox.Timedout\\\",\\\"errorMessage\\\":\\\"RequestId: 4925dbbc-330f-4557-b793-2589b1e14820 Error: Task timed out after 3.00 seconds\\\"}\"}]"}, "type": "data"}]}, {"code_hash": "37a3c23104812fb18a07dd3b63937322", "console": [], "id": "xXTn", "outputs": [{"data": {"application/json": "[\"text/plain:2025-11-23 00:37:14.893240+00:00\"]"}, "type": "data"}]}, {"code_hash": "71f18bdab2f12b8f942bc2dfa1cef3e3", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "2025-11-23 00:37:15.090000+00:00: INIT_START Runtime Version: python:3.13.v74\tRuntime Version ARN: arn:aws:lambda:eu-west-2::runtime:ce7da947c7c5e914eae22806e9f241ceb83a56a93ebcae5588c99b18c38636ce\n2025-11-23 00:37:25.090000+00:00: INIT_REPORT Init Duration: 10000.04 ms\tPhase: init\tStatus: timeout\n2025-11-23 00:37:28.107000+00:00: INIT_REPORT Init Duration: 3000.80 ms\tPhase: invoke\tStatus: timeout\n2025-11-23 00:37:28.107000+00:00: START RequestId: 4925dbbc-330f-4557-b793-2589b1e14820 Version: $LATEST\n2025-11-23 00:37:28.115000+00:00: END RequestId: 4925dbbc-330f-4557-b793-2589b1e14820\n2025-11-23 00:37:28.115000+00:00: REPORT RequestId: 4925dbbc-330f-4557-b793-2589b1e14820\tDuration: 3000.00 ms\tBilled Duration: 3000 ms\tMemory Size: 128 MB\tMax Memory Used: 37 MB\tStatus: timeout\n\n", "type": "stream"}], "id": "AjVT", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "7624b9958b14b6e64cca1fb5e0397f59", "console": [], "id": "BVRN", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003EThe init timed out after 10s.\nBut the payload says \"Task timed out after 3.00 seconds\".\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EWe have two \u003Ccode\u003EINIT_REPORT\u003C/code\u003Es,\nas we did for \u003Ccode\u003Einit_exception\u003C/code\u003E.\nOne is for the init phase and records a duration of 10s.\nThe other is for the invoke phase and records a duration of about 3s.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EWe have a \u003Ccode\u003EREPORT\u003C/code\u003E too,\nthis with a duration of exactly 3s.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EPuzzling again,\nlike for \u003Ccode\u003Einit_exception\u003C/code\u003E.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe response and the logs are half-subsuming the init into the invoke.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EMy takeaway: the logs are geared for the normal case, not init failures.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "01fa6041cd4f7da9879ac3ae1a6bb5fc", "console": [], "id": "pHFh", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"handler_times_out\"\u003E\u003Ccode\u003Ehandler_times_out\u003C/code\u003E\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "5b1bd4cebb61d7ae18659a1cd3c39ff2", "console": [], "id": "fmRH", "outputs": [{"data": {"application/json": "[{\"StatusCode\": 200, \"FunctionError\": \"Unhandled\", \"Payload\": \"{\\\"errorType\\\":\\\"Sandbox.Timedout\\\",\\\"errorMessage\\\":\\\"RequestId: 1db666a9-f40f-4a96-afba-23c99bf8922d Error: Task timed out after 3.00 seconds\\\"}\"}]"}, "type": "data"}]}, {"code_hash": "624811faa61f202fbb89d829465cf014", "console": [], "id": "Cvih", "outputs": [{"data": {"application/json": "[\"text/plain:2025-11-23 00:37:28.079454+00:00\"]"}, "type": "data"}]}, {"code_hash": "f4d9222e7656bb75464da5ea53ecbeef", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "2025-11-23 00:37:28.259000+00:00: INIT_START Runtime Version: python:3.13.v74\tRuntime Version ARN: arn:aws:lambda:eu-west-2::runtime:ce7da947c7c5e914eae22806e9f241ceb83a56a93ebcae5588c99b18c38636ce\n2025-11-23 00:37:28.363000+00:00: START RequestId: 1db666a9-f40f-4a96-afba-23c99bf8922d Version: $LATEST\n2025-11-23 00:37:31.380000+00:00: END RequestId: 1db666a9-f40f-4a96-afba-23c99bf8922d\n2025-11-23 00:37:31.380000+00:00: REPORT RequestId: 1db666a9-f40f-4a96-afba-23c99bf8922d\tDuration: 3000.00 ms\tBilled Duration: 3101 ms\tMemory Size: 128 MB\tMax Memory Used: 37 MB\tInit Duration: 100.16 ms\tStatus: timeout\n\n", "type": "stream"}], "id": "DlIZ", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "d584a35b333e5d25ed1f65b0e347fdc6", "console": [], "id": "uNsA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003ENo surprises here.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "880ff0c2ab56be39271664b8ab679867", "console": [], "id": "NCOB", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch3 id=\"handler_returns_unserializable\"\u003E\u003Ccode\u003Ehandler_returns_unserializable\u003C/code\u003E\u003C/h3\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "a2ea028aa3bc5e815c93292ced279b63", "console": [], "id": "riIp", "outputs": [{"data": {"application/json": "[{\"StatusCode\": 200, \"FunctionError\": \"Unhandled\", \"Payload\": \"{\\\"errorMessage\\\": \\\"Unable to marshal response: Object of type set is not JSON serializable\\\", \\\"errorType\\\": \\\"Runtime.MarshalError\\\", \\\"requestId\\\": \\\"ebbac954-10f1-43b7-94cd-6c25013ec21c\\\", \\\"stackTrace\\\": []}\"}]"}, "type": "data"}]}, {"code_hash": "19a829d6f46548be6858f9d23ba4d066", "console": [], "id": "utRS", "outputs": [{"data": {"application/json": "[\"text/plain:2025-11-23 00:37:31.379685+00:00\"]"}, "type": "data"}]}, {"code_hash": "2cb0a30e7b72b5b5fd0bcafeab82f201", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "2025-11-23 00:37:31.640000+00:00: INIT_START Runtime Version: python:3.13.v74\tRuntime Version ARN: arn:aws:lambda:eu-west-2::runtime:ce7da947c7c5e914eae22806e9f241ceb83a56a93ebcae5588c99b18c38636ce\n2025-11-23 00:37:31.739000+00:00: START RequestId: ebbac954-10f1-43b7-94cd-6c25013ec21c Version: $LATEST\n2025-11-23 00:37:31.740000+00:00: [ERROR] Runtime.MarshalError: Unable to marshal response: Object of type set is not JSON serializable\nTraceback (most recent call last):2025-11-23 00:37:31.757000+00:00: END RequestId: ebbac954-10f1-43b7-94cd-6c25013ec21c\n2025-11-23 00:37:31.758000+00:00: REPORT RequestId: ebbac954-10f1-43b7-94cd-6c25013ec21c\tDuration: 2.19 ms\tBilled Duration: 98 ms\tMemory Size: 128 MB\tMax Memory Used: 37 MB\tInit Duration: 95.50 ms\t\n\n", "type": "stream"}], "id": "lAbl", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "0ac2d2d1e0384bb7ca3e192d6bfa727f", "console": [], "id": "Newz", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003EThe error type in the response is \u003Ccode\u003ERuntime.MarshalError\u003C/code\u003E,\nnot \u003Ccode\u003ETypeError\u003C/code\u003E, which is what \u003Ccode\u003Ejson.dumps(set())\u003C/code\u003E raises.\nThat makes sense:\na Lambda procedure failed,\nso we get Lambda-specific errors,\neven if that procedure is mimicking Python's \u003Ccode\u003Ejson.dumps()\u003C/code\u003E.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "12236ca5736abe4ad544399ae80c19e2", "console": [], "id": "aqbW", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"references\"\u003EReferences\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003E[1] \u003Ca href=\"https://aws.amazon.com/blogs/compute/aws-lambda-standardizes-billing-for-init-phase/\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://aws.amazon.com/blogs/compute/aws-lambda-standardizes-billing-for-init-phase/\u003C/a\u003E\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E[2] \u003Ca href=\"https://www.ietf.org/rfc/rfc7159.txt\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://www.ietf.org/rfc/rfc7159.txt\u003C/a\u003E\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E[3] \u003Ca href=\"https://stackoverflow.com/a/7487892\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://stackoverflow.com/a/7487892\u003C/a\u003E\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E[4] \u003Ca href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/lambda/client/invoke.html\" rel=\"noopener\" target=\"_blank\"\u003Ehttps://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/lambda/client/invoke.html\u003C/a\u003E\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}], "metadata": {"marimo_version": "0.17.7"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.17.7%22%0Aapp%20%3D%20marimo.App(width%3D%22medium%22)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20return%20(mo%2C)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%20Lambda%20Response%20and%20Logs%0A%0A%20%20%20%20When%20you%20invoke%20a%20lambda%20function%2C%0A%20%20%20%20what%20do%20the%20responses%20and%20logs%20look%20like%0A%20%20%20%20-%20for%20cold%20versus%20warm%20start%3F%0A%20%20%20%20-%20if%20the%20init%20raises%20an%20exception%3F%0A%20%20%20%20-%20if%20the%20handler%20raises%20an%20exception%3F%0A%20%20%20%20-%20if%20the%20init%20times%20out%3F%0A%20%20%20%20-%20if%20the%20handler%20times%20out%3F%0A%20%20%20%20-%20if%20the%20handler%20returns%20an%20unserializable%20object%3F%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Stack%0A%0A%20%20%20%20Just%20a%20bunch%20of%20lambdas%3A%0A%20%20%20%20-%20%60slow_init%60%0A%20%20%20%20-%20%60init_exception%60%0A%20%20%20%20-%20%60handler_exception%60%0A%20%20%20%20-%20%60init_times_out%60%0A%20%20%20%20-%20%60handler_times_out%60%0A%20%20%20%20-%20%60handler_returns_unserializable%60%0A%0A%20%20%20%20each%20doing%20what%20its%20name%20suggests%2C%20via%20%60sleep()%60%20or%20%60raise%20Exception%60%20or%20%60return%20set()%60.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Setup%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20import%20boto3%0A%20%20%20%20import%20datetime%0A%20%20%20%20return%20boto3%2C%20datetime%0A%0A%0A%40app.cell%0Adef%20_(boto3)%3A%0A%20%20%20%20lambda_%20%3D%20boto3.client(%22lambda%22)%0A%20%20%20%20logs%20%3D%20boto3.client(%22logs%22)%0A%20%20%20%20return%20lambda_%2C%20logs%0A%0A%0A%40app.cell%0Adef%20_(datetime%2C%20lambda_)%3A%0A%20%20%20%20call_times%20%3D%20%7B%7D%0A%20%20%20%20responses%20%3D%20%7B%7D%0A%0A%20%20%20%20for%20function_name%20in%20(%0A%20%20%20%20%20%20%20%20%22slow_init%22%2C%0A%20%20%20%20%20%20%20%20%22slow_init%22%2C%20%20%23%20twice%2C%20to%20contrast%20cold%20versus%20warm%20start%0A%20%20%20%20%20%20%20%20%22init_exception%22%2C%0A%20%20%20%20%20%20%20%20%22handler_exception%22%2C%0A%20%20%20%20%20%20%20%20%22init_times_out%22%2C%0A%20%20%20%20%20%20%20%20%22handler_times_out%22%2C%0A%20%20%20%20%20%20%20%20%22handler_returns_unserializable%22%2C%0A%20%20%20%20)%3A%0A%20%20%20%20%20%20%20%20%23%20the%20dict%20values%20are%20all%20lists%20so%20i%20can%20treat%20once-called%20and%20twice-called%20functions%20uniformly%0A%20%20%20%20%20%20%20%20call_times.setdefault(function_name%2C%20%5B%5D).append(datetime.datetime.now(datetime.UTC))%0A%20%20%20%20%20%20%20%20response%20%3D%20lambda_.invoke(FunctionName%3Dfunction_name)%0A%20%20%20%20%20%20%20%20del%20response%5B%22ResponseMetadata%22%5D%20%20%23%20just%20noise%20for%20our%20purposes%0A%20%20%20%20%20%20%20%20del%20response%5B%22ExecutedVersion%22%5D%20%20%23%20%22%24LATEST%22%0A%20%20%20%20%20%20%20%20%23%20the%20%22Payload%22%20value%20is%20a%20botocore.response.StreamingBody%20object%0A%20%20%20%20%20%20%20%20%23%20it's%20file-like%2C%20so%20has%20a%20%60read()%60%20method%2C%20returning%20bytes%0A%20%20%20%20%20%20%20%20response%5B%22Payload%22%5D%20%3D%20response%5B%22Payload%22%5D.read().decode(%22utf-8%22)%0A%20%20%20%20%20%20%20%20responses.setdefault(function_name%2C%20%5B%5D).append(response)%0A%20%20%20%20return%20call_times%2C%20responses%0A%0A%0A%40app.cell%0Adef%20_(call_times%2C%20datetime%2C%20logs)%3A%0A%20%20%20%20def%20print_logs(function_name)%3A%0A%20%20%20%20%20%20%20%20earliest_call_time%20%3D%20min(call_times%5Bfunction_name%5D)%0A%0A%20%20%20%20%20%20%20%20earliest_call_timestamp_in_ms%20%3D%20int(earliest_call_time.timestamp())%20*%201000%0A%20%20%20%20%20%20%20%20response%20%3D%20logs.filter_log_events(%0A%20%20%20%20%20%20%20%20%20%20%20%20logGroupName%3Df%22%2Faws%2Flambda%2F%7Bfunction_name%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20startTime%3Dearliest_call_timestamp_in_ms%2C%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20nice_logs%20%3D%20%22%22%0A%20%20%20%20%20%20%20%20for%20event%20in%20response%5B%22events%22%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20t%20%3D%20datetime.datetime.fromtimestamp(event%5B%22timestamp%22%5D%20%2F%201000%2C%20datetime.UTC)%0A%20%20%20%20%20%20%20%20%20%20%20%20message%20%3D%20event%5B%22message%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20nice_logs%20%2B%3D%20f%22%7Bt%7D%3A%20%7Bmessage%7D%22%0A%0A%20%20%20%20%20%20%20%20print(nice_logs)%0A%20%20%20%20return%20(print_logs%2C)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Results%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20%60slow_init%60%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(responses)%3A%0A%20%20%20%20responses%5B%22slow_init%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(call_times)%3A%0A%20%20%20%20call_times%5B%22slow_init%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(print_logs)%3A%0A%20%20%20%20print_logs(%22slow_init%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20%60StatusCode%60%20key%20is%20from%20the%20Lambda%20service%2C%20not%20the%20function.%0A%0A%20%20%20%20In%20happy%20cases%2C%20like%20this%20one%2C%20the%20%60%22Payload%22%60%20is%20the%20%60json.dumps()%60%20of%20the%20function's%20return%20value.%0A%0A%20%20%20%20The%20first%2C%20cold%20invocation%20has%20an%20%60INIT_START%60%20message%20and%20an%20%60Init%20Duration%60%20in%20the%20%60REPORT%60%20message.%0A%20%20%20%20The%20second%2C%20warm%20invocation%20has%20neither.%0A%0A%20%20%20%20The%20first%20invocation's%20%60Billed%20Duration%60%20is%20the%20_sum_%20of%20its%20%60Init%20Duration%60%20and%20(handler)%20%60Duration%60%2C%20rounded%20up%20to%20the%20nearest%20millsecond.%0A%20%20%20%20So%20you're%20billed%20for%20the%20init%20time.%0A%20%20%20%20That's%20a%20recent%20change.%0A%20%20%20%20Before%20August%201%202025%2C%20the%20init%20time%20for%0A%0A%20%20%20%20%3E%20on-demand%20invocations%20of%20Lambda%20functions%20packaged%20as%20ZIP%20files%20that%20use%20managed%20runtimes%0A%0A%20%20%20%20were%20not%20billed.%0A%0A%20%20%20%20The%20function's%20timeout%20is%203s%20(the%20default).%0A%20%20%20%20The%20init%20was%204s.%0A%20%20%20%20But%20no%20timeout.%0A%20%20%20%20So%20the%20init%20does%20not%20count%20towards%20the%20function's%20timeout.%0A%0A%20%20%20%20Payloads%20are%20meant%20to%20be%20json%2C%0A%20%20%20%20but%20%60%22hi%20there%22%60%20isn't%20json%2C%20is%20it%3F%0A%20%20%20%20Sure%20it%20is%20%5B2%5D%3A%0A%0A%20%20%20%20%3E%20A%20JSON%20text%20is%20a%20serialized%20value.%20Note%20that%20certain%20previous%20specifications%20of%20JSON%20constrained%20a%20JSON%20text%20to%20be%20an%20object%20or%20an%20array.%0A%0A%20%20%20%20%5B3%5D%20explains%20the%20confusion%20nicely.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20%60init_exception%60%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(responses)%3A%0A%20%20%20%20responses%5B%22init_exception%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(call_times)%3A%0A%20%20%20%20call_times%5B%22init_exception%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(print_logs)%3A%0A%20%20%20%20print_logs(%22init_exception%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%60%22StatusCode%22%3A%20200%60%20in%20the%20response%2C%0A%20%20%20%20despite%20the%20exception%2C%0A%20%20%20%20because%20it's%20about%20your%20request%20to%20the%20Lambda%20service%2C%0A%20%20%20%20not%20about%20your%20function%20%5B4%5D.%0A%0A%20%20%20%20%3E%20The%20status%20code%20in%20the%20API%20response%20doesn%E2%80%99t%20reflect%20function%20errors.%20Error%20codes%20are%20reserved%20for%20errors%20that%20prevent%20your%20function%20from%20executing%2C%20such%20as%20permissions%20errors%2C%20quota%20errors%2C%20or%20issues%20with%20your%20function%E2%80%99s%20code%20and%20configuration.%0A%0A%20%20%20%20What%20does%20flag%20that%20something%20went%20wrong%0A%20%20%20%20is%20the%20presence%20of%20%60%22FunctionError%22%60.%0A%20%20%20%20The%20value%20is%20%60%22Unhandled%22%60%2C%0A%20%20%20%20which%20makes%20sense%2C%0A%20%20%20%20but%20I%20wonder%20if%20any%20other%20values%20are%20possible.%0A%0A%20%20%20%20The%20payload%20is%20rich%0A%20%20%20%20%E2%80%94%20even%20a%20stacktrace%20(%22traceback%22%20in%20the%20logs).%0A%0A%20%20%20%20The%20response%20doesn't%20explicitly%20flag%20that%20the%20error%20was%20in%20the%20init.%0A%20%20%20%20In%20this%20case%2C%20it's%20plain%20from%20the%20stacktrace.%0A%20%20%20%20In%20actual%20cases%2C%20it%20might%20not%20be.%0A%0A%20%20%20%20Notice%20the%20empty%20request%20id%20in%20the%20payload%0A%20%20%20%20but%20populated%20request%20id%20in%20the%20last%20few%20logs.%0A%0A%20%20%20%20The%20logs%20have%20an%20%60INIT_REPORT%60%20message%20this%20time%2C%0A%20%20%20%20including%20%60Phase%3A%20init%60%20and%20%60Status%3A%20error%60.%0A%20%20%20%20That's%20helpful%0A%20%20%20%20%E2%80%94%20no%20mistaking%20that%20the%20init%20errored.%0A%20%20%20%20I%20guess%20we%20get%20an%20%60INIT_REPORT%60%20only%20when%20the%20init%20goes%20wrong%3F%0A%0A%20%20%20%20We%20also%20get%20a%20%60LAMBDA_WARNING%60%20message%20from%20the%20Lambda%20service%2C%0A%20%20%20%20and%20the%20same%20traceback%20as%20was%20in%20the%20response.%0A%0A%20%20%20%20In%20fact%20we%20get%20these%20messages%0A%20%20%20%20%E2%80%94%20the%20%60LAMBDA_WARNING%60%2C%20traceback%2C%20and%20%60INIT_REPORT%60%0A%20%20%20%20%E2%80%94%20twice!%0A%20%20%20%20But%20the%20second%20%60INIT_REPORT%60%20is%20slightly%20different%3A%0A%20%20%20%20a%20different%20duration%0A%20%20%20%20and%20%60Phase%3A%20invoke%60.%0A%0A%20%20%20%20And%20we%20also%20get%20a%20%60REPORT%60%2C%0A%20%20%20%20with%20yet%20a%20different%20duration.%0A%0A%20%20%20%20Puzzling.%0A%20%20%20%20Why%20does%20an%20%60INIT_REPORT%60%20refer%20to%20%60Phase%3A%20invoke%60%3F%0A%20%20%20%20Why%20repeat%20the%20warning%20and%20traceback%3F%0A%20%20%20%20Why%20three%20different%20durations%3F%0A%20%20%20%20Why%20request%20id%20in%20logs%20but%20not%20payload%3F%0A%20%20%20%20Does%20Lambda%20try%20to%20invoke%20your%20function%20even%20when%20the%20init%20failed%3F%0A%20%20%20%20Or%20is%20it%20just%20pretending%20that%20it%20tried%3F%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20%60handler_exception%60%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(responses)%3A%0A%20%20%20%20responses%5B%22handler_exception%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(call_times)%3A%0A%20%20%20%20call_times%5B%22handler_exception%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(print_logs)%3A%0A%20%20%20%20print_logs(%22handler_exception%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20No%20surprises%20here.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20%60init_times_out%60%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(responses)%3A%0A%20%20%20%20responses%5B%22init_times_out%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(call_times)%3A%0A%20%20%20%20call_times%5B%22init_times_out%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(print_logs)%3A%0A%20%20%20%20print_logs(%22init_times_out%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20init%20timed%20out%20after%2010s.%0A%20%20%20%20But%20the%20payload%20says%20%22Task%20timed%20out%20after%203.00%20seconds%22.%0A%0A%20%20%20%20We%20have%20two%20%60INIT_REPORT%60s%2C%0A%20%20%20%20as%20we%20did%20for%20%60init_exception%60.%0A%20%20%20%20One%20is%20for%20the%20init%20phase%20and%20records%20a%20duration%20of%2010s.%0A%20%20%20%20The%20other%20is%20for%20the%20invoke%20phase%20and%20records%20a%20duration%20of%20about%203s.%0A%0A%20%20%20%20We%20have%20a%20%60REPORT%60%20too%2C%0A%20%20%20%20this%20with%20a%20duration%20of%20exactly%203s.%0A%0A%20%20%20%20Puzzling%20again%2C%0A%20%20%20%20like%20for%20%60init_exception%60.%0A%0A%20%20%20%20The%20response%20and%20the%20logs%20are%20half-subsuming%20the%20init%20into%20the%20invoke.%0A%0A%20%20%20%20My%20takeaway%3A%20the%20logs%20are%20geared%20for%20the%20normal%20case%2C%20not%20init%20failures.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20%60handler_times_out%60%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(responses)%3A%0A%20%20%20%20responses%5B%22handler_times_out%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(call_times)%3A%0A%20%20%20%20call_times%5B%22handler_times_out%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(print_logs)%3A%0A%20%20%20%20print_logs(%22handler_times_out%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20No%20surprises%20here.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20%60handler_returns_unserializable%60%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(responses)%3A%0A%20%20%20%20responses%5B%22handler_returns_unserializable%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(call_times)%3A%0A%20%20%20%20call_times%5B%22handler_returns_unserializable%22%5D%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(print_logs)%3A%0A%20%20%20%20print_logs(%22handler_returns_unserializable%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20error%20type%20in%20the%20response%20is%20%60Runtime.MarshalError%60%2C%0A%20%20%20%20not%20%60TypeError%60%2C%20which%20is%20what%20%60json.dumps(set())%60%20raises.%0A%20%20%20%20That%20makes%20sense%3A%0A%20%20%20%20a%20Lambda%20procedure%20failed%2C%0A%20%20%20%20so%20we%20get%20Lambda-specific%20errors%2C%0A%20%20%20%20even%20if%20that%20procedure%20is%20mimicking%20Python's%20%60json.dumps()%60.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20References%0A%0A%20%20%20%20%5B1%5D%20https%3A%2F%2Faws.amazon.com%2Fblogs%2Fcompute%2Faws-lambda-standardizes-billing-for-init-phase%2F%0A%0A%20%20%20%20%5B2%5D%20https%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc7159.txt%0A%0A%20%20%20%20%5B3%5D%20https%3A%2F%2Fstackoverflow.com%2Fa%2F7487892%0A%0A%20%20%20%20%5B4%5D%20https%3A%2F%2Fboto3.amazonaws.com%2Fv1%2Fdocumentation%2Fapi%2Flatest%2Freference%2Fservices%2Flambda%2Fclient%2Finvoke.html%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">32904557bfff25aa944453ac594f1003</marimo-code-hash>
</body>
</html>
